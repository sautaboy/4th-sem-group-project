<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <link rel="stylesheet" href="/stylesheets/style.css">
    <link rel="stylesheet" href="/stylesheets/semister.css">
</head>

<body>
    <% include header.ejs %>

        <div id="content-body">
            <i class="ri-arrow-left-double-fill show-subject-list"></i>

            <div class="quick-links">
                <h2>
                    Qucik Links
                </h2>
                <a href="#<%= semisterContent.subOne %>">
                    <%= semisterContent.subOne %>
                </a>
                <a href="#<%= semisterContent.subTwo %>">
                    <%= semisterContent.subTwo %>

                </a>
                <a href="#<%= semisterContent.subThree %>">
                    <%= semisterContent.subThree %>

                </a>
                <a href="#<%= semisterContent.subFour %>">
                    <%= semisterContent.subFour %>

                </a>
                <a href="#<%= semisterContent.subFive %>">
                    <%= semisterContent.subFive %>
                </a>


                <h3>
                    Past Year Questions
                </h3>
                <div class="quick-links-past-year-questions">


                    <% if (semisterContent.firstLink) { %>
                        <a href="<%= semisterContent.firstLink %>" target="_blank">
                            <%= semisterContent.firstLinkDate %>
                        </a>
                        <% } %>
                            <% if (semisterContent.secondLink) { %>
                                <a href="<%= semisterContent.secondLink %>" target="_blank">
                                    <%= semisterContent.secondLinkDate %>
                                </a>
                                <% } %>

                                    <% if (semisterContent.thirdLink) { %>
                                        <a href="<%= semisterContent.thirdLink %>" target="_blank">
                                            <%= semisterContent.thirdLinkDate %>
                                        </a>
                                        <% } %>

                                            <% if (semisterContent.fourthLink) { %>
                                                <a href="<%= semisterContent.fourthLink %>" target="_blank">
                                                    <%= semisterContent.fourthLinkDate %>
                                                </a>
                                                <% } %>


                                                    <% if (semisterContent.fifthLink) { %>
                                                        <a href="<%= semisterContent.fifthLink %>" target="_blank">
                                                            <%= semisterContent.fifthLinkDate %>
                                                        </a>
                                                        <% } %>


                                                            <% if (semisterContent.fifthLink) { %>
                                                                <a href="<%= semisterContent.fifthLink %>"
                                                                    target="_blank">
                                                                    <%= semisterContent.fifthLinkDate %>
                                                                </a>
                                                                <% } %>

                                                                    <% if (semisterContent.sixthLink) { %>
                                                                        <a href="<%= semisterContent.sixthLink %>"
                                                                            target="_blank">
                                                                            <%= semisterContent.sixthLinkDate %>
                                                                        </a>
                                                                        <% } %>



                </div>
            </div>


            <div id="content-container">


                <div class="content" id="<%= semisterContent.subOne %>">
                    <div class="notes-container">
                        <h2>
                            <%= semisterContent.subOne %>
                        </h2>
                        <iframe src="<%= semisterContent.subOnePdfUrl %>" frameborder="0"></iframe>
                        </iframe>
                        <div class="book-mark-section">
                            <% if (isAuthenticated) { %>
                                <p>You can see your bookmarks on your profile.</p>
                                <i class="ri-bookmark-line bookmark-button"
                                    id="bookmarkButton<%= semisterContent.subOne %>"></i>
                                <% } else { %>
                                    <p>You have to be logged in to bookmark the notes.</p>
                                    <% } %>
                        </div>
                    </div>
                </div>



                <div class="content" id="<%= semisterContent.subTwo %>">
                    <div class="notes-container">
                        <h2>
                            <%= semisterContent.subTwo %>
                        </h2>
                        <iframe src="<%= semisterContent.subTwoPdfUrl %>" frameborder="0"></iframe>

                        </iframe>
                        <div class="book-mark-section">
                            <% if (isAuthenticated) { %>
                                <p>You can see your bookmarks on your profile.</p>
                                <i class="ri-bookmark-line bookmark-button"
                                    id="bookmarkButton<%= semisterContent.subTwo %>"></i>
                                <% } else { %>
                                    <p>You have to be logged in to bookmark the notes.</p>
                                    <% } %>
                        </div>

                    </div>
                </div>



                <div class="content" id="<%= semisterContent.subThree %>">
                    <div class="notes-container">
                        <h2>
                            <%= semisterContent.subThree %>
                        </h2>
                        <iframe src="<%= semisterContent.subThirdPdfUrl %>" frameborder="0"></iframe>

                        </iframe>
                        <div class="book-mark-section">
                            <% if (isAuthenticated) { %>
                                <p>You can see your bookmarks on your profile.</p>
                                <i class="ri-bookmark-line bookmark-button"
                                    id="bookmarkButton<%= semisterContent.subThree %>"></i>
                                <% } else { %>
                                    <p>You have to be logged in to bookmark the notes.</p>
                                    <% } %>
                        </div>


                    </div>
                </div>



                <div class="content" id="<%= semisterContent.subFour %>">
                    <div class="notes-container">
                        <h2>
                            <%= semisterContent.subFour %>
                        </h2>
                        <iframe src="<%= semisterContent.subFourPdfUrl %>" frameborder="0"></iframe>

                        </iframe>
                        <div class="book-mark-section">
                            <% if (isAuthenticated) { %>
                                <p>You can see your bookmarks on your profile.</p>
                                <i class="ri-bookmark-line bookmark-button"
                                    id="bookmarkButton<%= semisterContent.subFour %>"></i>
                                <% } else { %>
                                    <p>You have to be logged in to bookmark the notes.</p>
                                    <% } %>
                        </div>


                    </div>
                </div>



                <div class="content" id="<%= semisterContent.subFive %>">
                    <div class="notes-container">
                        <h2>
                            <%= semisterContent.subFive %>
                        </h2>
                        <iframe src="<%= semisterContent.subFivePdfUrl %>" frameborder="0"></iframe>

                        </iframe>
                        <div class="book-mark-section">
                            <% if (isAuthenticated) { %>
                                <p>You can see your bookmarks on your profile.</p>
                                <i class="ri-bookmark-line bookmark-button"
                                    id="bookmarkButton<%= semisterContent.subFive %>"></i>
                                <% } else { %>
                                    <p>You have to be logged in to bookmark the notes.</p>
                                    <% } %>
                        </div>

                    </div>
                </div>
            </div>


        </div>

        <% include footer.ejs%>


            <!-- Other HTML content above -->

            <!-- Other HTML content above -->

            <script>
                const bookmarkButtons = document.querySelectorAll('.bookmark-button');
                document.addEventListener('DOMContentLoaded', function () {
                    // Get all bookmark buttons by class name
                    // bookmarkButtons=localStorage.getItem('bookmarkButtons');    

                    // Add an event listener to each bookmark button
                    bookmarkButtons.forEach(button => {
                        button.addEventListener('click', function (e) {
                            // Find the parent div of the clicked bookmark button

                            // bookmarkButtons.style.backgroundColor="black"
                            const parentDiv = button.closest('.content');

                            // Find the iframe within the parent div
                            const iframe = parentDiv.querySelector('iframe');

                            // Extract the iframe URL
                            const subjectUrl = iframe ? iframe.src : null;

                            if (!subjectUrl) {
                                console.error('Failed to get iframe URL');
                                return;
                            }

                            // Implement bookmark logic here
                            // You might want to make an AJAX request to your server to handle the bookmark action
                            // Example: Fetch API
                            const subjectTitle = button.id.replace('bookmarkButton', ''); // Remove 'bookmarkButton' prefix

                            fetch('/bookmark', {
                                method: 'POST',
                                headers: {
                                    'Content-Type': 'application/json',
                                },
                                body: JSON.stringify({
                                    title: subjectTitle,
                                    url: subjectUrl,
                                }),
                            })
                                .then(response => {
                                    if (response.ok) {
                                        console.log('Subject bookmarked successfully');
                                    } else {
                                        console.error('Failed to bookmark subject');
                                    }
                                })
                                .catch(error => {
                                    console.error('Error bookmarking subject:', error);
                                });

                            // Update the bookmark button's class
                            e.target.classList.remove('ri-bookmark-line');
                            e.target.classList.add('ri-bookmark-fill');
                        });
                    });
                });

            </script>

            <script>

                document.querySelector(".show-subject-list").addEventListener("click", function (e) {
                    document.querySelector(".quick-links").classList.toggle("open");
                    e.target.classList.toggle("ri-arrow-right-double-fill")
                    e.target.classList.toggle("ri-arrow-left-double-fill")
                })
            </script>

            <script>


                // document.querySelectorAll(".quick-links a").forEach(function (e) {
                //     e.addEventListener("click", function () {
                //         document.querySelector(".quick-links").classList.remove("open");

                //         document.querySelector(".show-subject-list").classList.toggle("ri-arrow-right-double-fill")
                //         document.querySelector(".show-subject-list").classList.toggle("ri-arrow-left-double-fill")
                //     });
                // });
            </script>


            <script>
                document.addEventListener('DOMContentLoaded', function () {
                    // Get all bookmark buttons
                    var bookmarkButtons = document.querySelectorAll('.bookmark-button');

                    // Loop through each bookmark button
                    bookmarkButtons.forEach(function (eachButton) {
                        // Create a unique key for each button based on its id or some other identifier
                        var buttonKey = "blackBackslashBookmark_" + eachButton.id;

                        // Check if the button is bookmarked
                        var isBookmarked = localStorage.getItem(buttonKey);

                        // Set the initial color based on the bookmarked state
                        if (isBookmarked) {
                            eachButton.style.color = "red";
                        }

                        // Add click event listener to each bookmark button
                        eachButton.addEventListener("click", function (e) {
                            eachButton.style.color = "red";

                            // Set the bookmarked state in localStorage for this specific button
                            localStorage.setItem(buttonKey, true);
                        });
                    });
                });


            </script>


</body>

</html>